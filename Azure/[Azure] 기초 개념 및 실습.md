# [Azure] Azure ê¸°ì´ˆ ê°œë… ë° ì‹¤ìŠµ



### ğŸ“ŒINDEX

- [ë¦¬ì†ŒìŠ¤ ê·¸ë£¹](#ë¦¬ì†ŒìŠ¤-ê·¸ë£¹)

- [ê³µìš© IP](#ê³µìš©-ip)
- [ì‚¬ìš©ì](#ì‚¬ìš©ì)
- [ê°€ìƒ ë„¤íŠ¸ì›Œí¬](#ê°€ìƒ-ë„¤íŠ¸ì›Œí¬)
- [ê°€ìƒ ë¨¸ì‹ ](#ê°€ìƒ-ë¨¸ì‹ )

<br>

<br>

## ë¦¬ì†ŒìŠ¤ ê·¸ë£¹

[What is resource group?](https://docs.microsoft.com/ko-kr/azure/azure-resource-manager/management/manage-resource-groups-portal#what-is-a-resource-group)

ê°€ìƒ ë¨¸ì‹ ì´ë‚˜ ê°€ìƒ ë„¤íŠ¸ì›Œí¬, ìŠ¤í† ë¦¬ì§€ ê³„ì •ê³¼ ê°™ì€ **ë¦¬ì†ŒìŠ¤ë¥¼ ëª©ì ì— ë”°ë¼ ë…¼ë¦¬ì ìœ¼ë¡œ ê·¸ë£¹í™”í•œ ê²ƒ**(AWSì—ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê°œë…)

<br>

ë¦¬ì†ŒìŠ¤ì™€ ì‹œì†ŒìŠ¤ ê·¸ë£¹ ê°„ì˜ ê´€ê³„ê°€ ê°–ëŠ” íŠ¹ì„±

- **ë¦¬ì†ŒìŠ¤ëŠ” í•˜ë‚˜ì˜ ë¦¬ì†ŒìŠ¤ ê·¸ë£¹ì—ë§Œ ì¡´ì¬**í•´ì•¼í•¨
- ë¦¬ì†ŒìŠ¤ì™€ ë¦¬ì†ŒìŠ¤ ê·¸ë£¹ì˜ ì´ë¦„ì€ ë³€ê²½í•  ìˆ˜ ì—†ìŒ
- **ë¦¬ë¡œìŠ¤ ê·¸ë£¹ê³¼ ë¦¬ì†ŒìŠ¤ì˜ ìœ„ì¹˜(ì§€ì—­)ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ** 
  - ë‹¨ìˆœíˆ ì–´ë””ì„œ ê´€ë¦¬í•  ê²ƒì¸ê°€ì˜ ì°¨ì´
  - ë¦¬ì†ŒìŠ¤ ëª©ë¡ì„ ì–´ë””ì—ì„œ ê´€ë¦¬í• ì§€ëŠ” ìƒê´€ ì—†ìŒ
- í•œ ë¦¬ì†ŒìŠ¤ ê·¸ë£¹ì˜ ë¦¬ì†ŒìŠ¤ê°€ ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤ ê·¸ë£¹ì˜ ë¦¬ì†ŒìŠ¤ì™€ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆìŒ
- í•œ ë¦¬ì†ŒìŠ¤ ê·¸ë£¹ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤ ê·¸ë£¹ìœ¼ë¡œ ì´ë™í•  ìˆ˜ ìˆìŒ

ë¯¸ë¦¬ ë¦¬ì†ŒìŠ¤ë¥¼ ë§Œë“¤ì–´ë‘” ë’¤, ë‚˜ì¤‘ì— ë¦¬ì†ŒìŠ¤ ê·¸ë£¹ì— ë°°ì¹˜í•  ìˆ˜ ìˆìŒ

**ê³„ì¸µ êµ¬ì¡° : ë¦¬ì†ŒìŠ¤ ê·¸ë£¹ âŠ‚ ê·¸ë£¹ âŠ‚ êµ¬ë…**

<br>

**ğŸ’» ì‹¤ìŠµ: ë¦¬ì†ŒìŠ¤ ê·¸ë£¹ ë§Œë“¤ê¸°**

![image-20220426065154542](https://raw.githubusercontent.com/na3150/typora-img/main/img/image-20220426065154542.png)

![image-20220426065248430](https://raw.githubusercontent.com/na3150/typora-img/main/img/image-20220426065248430.png)

<br>

<br>

## ê³µìš© IP

[ê³µìš© IP ì£¼ì†Œ](https://docs.microsoft.com/ko-kr/azure/virtual-network/ip-services/public-ip-addresses)

ê³µìš© IP ì£¼ì†Œë¥¼ í†µí•´ ì¸í„°ë„· ë¦¬ì†ŒìŠ¤ê°€ Azure ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì¸ë°”ìš´ë“œì™€ í†µì‹ í•  ìˆ˜ ìˆìŒ

AWSì˜ elastic ipì— í•´ë‹¹ë˜ëŠ” ê²ƒ

<br>

**ğŸ’» ì‹¤ìŠµ: ê³µìš© ip ì£¼ì†Œ ìƒì„±í•´ë³´ê¸°**

[ê³„ì¸µ] - [ì „ì—­] : (global) azure ì „ì²´ë¥¼ ì˜ë¯¸

![image-20220426070014418](https://raw.githubusercontent.com/na3150/typora-img/main/img/image-20220426070014418.png)

ë¦¬ì†ŒìŠ¤ ê·¸ë£¹ì—ì„œ ë¦¬ì†ŒìŠ¤ ì¶”ê°€ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŒ

![image-20220426070504050](https://raw.githubusercontent.com/na3150/typora-img/main/img/image-20220426070504050.png)

<br>

<br>

## ì‚¬ìš©ì

[Azure RBAC](https://docs.microsoft.com/ko-kr/azure/role-based-access-control/)

Azure RBACë€ Azure ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì„¸ë°€í•œ ì•¡ì„¸ìŠ¤ ê´€ë¦¬ë¥¼ ì œê³µí•˜ëŠ” ì‹œìŠ¤í…œ

[Azure ì™¸ë¶€ ê²ŒìŠ¤íŠ¸](https://docs.microsoft.com/ko-kr/azure/role-based-access-control/role-assignments-external-users)

**ì´ë©”ì¼ í˜•íƒœ**ë¡œ ê²ŒìŠ¤íŠ¸ë¥¼ ì´ˆëŒ€

ì™¸ë¶€ ê²ŒìŠ¤íŠ¸ê°€ í•„ìš”í•œ ê²½ìš°

- ì´ë©”ì¼ ê³„ì •ë§Œ ìˆëŠ” ì™¸ë¶€ ìì˜ì—…ìê°€ í”„ë¡œì íŠ¸ì— ëŒ€í•œ Azure ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©
- ì™¸ë¶€ íŒŒíŠ¸ë„ˆê°€ íŠ¹ì • ë¦¬ì†ŒìŠ¤ ë˜ëŠ” ì „ì²´ êµ¬ë…ì„ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©
- ê³ ê° ì¡°ì§ì— ì†í•˜ì§€ ì•Šì€ ì§€ì› ì—”ì§€ë‹ˆì–´(ì˜ˆ: Microsoft ì§€ì›)ê°€ ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ ì¼ì‹œì ìœ¼ë¡œ ê³ ê°ì˜ Azure ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©

<br>

**ê²ŒìŠ¤íŠ¸ ì‚¬ìš©ìì—ê²Œ ì—­í•  í• ë‹¹**

[ë¦¬ì†ŒìŠ¤ ê·¸ë£¹] - [ì•¡ì„¸ìŠ¤ ì œì–´(IAM)] - [ì—­í•  í• ë‹¹] í´ë¦­ í›„ ì—­í• ì„ ì„ íƒí•œ ë’¤ ì‚¬ìš©ì, ê·¸ë£¹ ë˜ëŠ” ì„œë¹„ìŠ¤ ì£¼ì²´ë¥¼ ì„ íƒ

![image-20220426071857080](https://raw.githubusercontent.com/na3150/typora-img/main/img/image-20220426071857080.png)

<br>

| ì—­í•    | ì„¤ëª…                                                         |
| ------ | ------------------------------------------------------------ |
| ì†Œìœ ì | Azure RBACì—ì„œ ì—­í• ì„ í• ë‹¹í•˜ëŠ” ê¸°ëŠ¥ì„ í¬í•¨í•˜ì—¬ ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ê¶Œí•œì„ ë¶€ì—¬ |
| ê¸°ì—¬ì | ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ê¶Œí•œì„ ë¶€ì—¬í•˜ì§€ë§Œ, ì—­í•  í• ë‹¹, í• ë‹¹ ê´€ë¦¬ ë˜ëŠ” ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ ê³µìœ ë¥¼ í—ˆìš©í•˜ì§€ ì•ŠìŒ |
| ë…ì   | ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ë³¼ ìˆ˜ ìˆì§€ë§Œ ë³€ê²½í•  ìˆ˜ëŠ” ì—†ìŒ                  |

<br>

<br>

## ê°€ìƒ ë„¤íŠ¸ì›Œí¬

[Azure Virtual Networkë€?](https://docs.microsoft.com/ko-kr/azure/virtual-network/virtual-networks-overview)

Azure Virtual Network(VNet)ëŠ” Azureì˜ **í”„ë¼ì´ë¹— ë„¤íŠ¸ì›Œí¬ì˜ ê¸°ë³¸ êµ¬ì„± ìš”ì†Œ**ë¡œ, Azure VM(Virtual Machines)ê³¼ ê°™ì€ ë‹¤ì–‘í•œ í˜•ì‹ì˜ Azure ë¦¬ì†ŒìŠ¤ê°€ ì„œë¡œ, ì¸í„°ë„· ë° íŠ¹ì • ì˜¨-í”„ë ˆë¯¸ìŠ¤ ë„¤íŠ¸ì›Œí¬ì™€ ì•ˆì „í•˜ê²Œ í†µì‹ í•  ìˆ˜ ìˆìŒ

- AzureëŠ” internet gatewayê°€ ìë™ìœ¼ë¡œ ìƒì„±
- nat gatewayê°€ ì—†ì–´ë„ ì¸í„°ë„· í†µì‹ ì´ ê°€ëŠ¥í•¨(ê·¸ëŸ¬ë‚˜ nat gatewayë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•¨)

- ì„œë¸Œë„·ì´ ë¦¬ì „ ì „ì²´ì— ê±¸ì³ì„œ ìƒì„±ë˜ê¸° ë•Œë¬¸ì—, ì„œë¸Œë„·ì„ ë§Œë“¤ ë•Œ ë³„ë„ì˜ ì˜ì—­ì„ ì§€ì •í•˜ì§€ ì•ŠìŒ

<br>

**ğŸ’» ì‹¤ìŠµ: ê°€ìƒ ë„¤íŠ¸ì›Œí¬ ìƒì„±í•˜ê¸°**

![image-20220426072707737](https://raw.githubusercontent.com/na3150/typora-img/main/img/image-20220426072707737.png)

default ì„œë¸Œë„· ì‚­ì œí•˜ê³  ì„œë¸Œë„· ìƒì„±í•´ë³´ê¸°

NAT ê²Œì´íŠ¸ì›¨ì´ëŠ” `ì—†ìŒ`ì„ ì²´í¬

![image-20220426072843160](https://raw.githubusercontent.com/na3150/typora-img/main/img/image-20220426072843160.png)

ë‚˜ë¨¸ì§€ëŠ” default ì„¤ì •ìœ¼ë¡œ ì§„í–‰

ìƒì„± í™•ì¸

![image-20220426073211552](https://raw.githubusercontent.com/na3150/typora-img/main/img/image-20220426073211552.png)

<br>

<br>

## ê°€ìƒ ë¨¸ì‹ 

[Azure Virtual Machine](https://docs.microsoft.com/ko-kr/azure/virtual-machines/)

[Azure Linux Virtual Machine](https://docs.microsoft.com/ko-kr/azure/virtual-machines/linux/overview)

Azure Virtual Machines(VM)ëŠ” Azureì—ì„œ ì œê³µí•˜ëŠ” ì—¬ëŸ¬ ìœ í˜•ì˜ [í™•ì¥ì„± ìˆëŠ” ì£¼ë¬¸í˜• ì»´í“¨íŒ… ë¦¬ì†ŒìŠ¤](https://docs.microsoft.com/ko-KR/azure/architecture/guide/technology-choices/compute-decision-tree) ì¤‘ í•˜ë‚˜

í•œë²ˆì´ë¼ë„ vmì„ ë§Œë“¤ë©´, ë„¤íŠ¸ì›Œí¬ë¥¼ ê°ì‹œí•  ë•Œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ `NeetworkWatcherRG`  ë¦¬ì†ŒìŠ¤ ê·¸ë£¹ì´ ìë™ìœ¼ë¡œ ìƒì„±ë¨ => íŠ¹ë³„íˆ ê´€ë¦¬í•  í•„ìš”ëŠ” ì—†ìŒ

<br>

**ğŸ’» ì‹¤ìŠµ: ê°€ìƒ ë¨¸ì‹  ìƒì„±í•˜ê¸°**

ê°€ìƒ ë¨¸ì‹  ì„ íƒ

![image-20220426073719340](https://raw.githubusercontent.com/na3150/typora-img/main/img/image-20220426073719340.png)

êµ¬ë…ê³¼ ë¦¬ì†ŒìŠ¤ ê·¸ë£¹ ì„ íƒ í›„ ê°€ìƒ ë¨¸ì‹  ì´ë¦„ ì…ë ¥

![image-20220426073832047](https://raw.githubusercontent.com/na3150/typora-img/main/img/image-20220426073832047.png)

ê¸€ì“´ì´ëŠ” ê¸°ì¡´ í¼ë¸”ë¦­ í‚¤ë¥¼ ì‚¬ìš©

AMIì— ë”°ë¼ ì‚¬ìš©ì ì´ë¦„ì´ ì •í•´ì ¸ìˆëŠ” AWSì™€ ë‹¬ë¦¬, **AzureëŠ” ì‚¬ìš©ì ì´ë¦„ì„ ì‚¬ìš©ìê°€ ì„¤ì •**í•  ìˆ˜ ìˆìŒ

ì£¼ì˜â—) í¼ë¸”ë¦­ í‚¤ë¥¼ ë¶™ì—¬ë„£ì„ ë•Œ, ë§ˆì§€ë§‰ì— ì‚¬ìš©ì ì§€ì •í•˜ëŠ” ê²ƒì€ ì œê±°í•´ì•¼í•¨(ì˜ˆ: `vagrant@controller`) => ë¶™ì´ë©´, ê·¸ê²ƒì´ ê³„ì •ì´ ë¨

![image-20220426074026217](https://raw.githubusercontent.com/na3150/typora-img/main/img/image-20220426074026217.png)

ê°€ìƒ ë„¤íŠ¸ì›Œí¬ ì„ íƒ

![image-20220426074622594](https://raw.githubusercontent.com/na3150/typora-img/main/img/image-20220426074622594.png)

ë‚˜ë¨¸ì§€ëŠ” default ì„¤ì •ìœ¼ë¡œ ë‘ê³ , ì ‘ì†í™•ì¸

```shell
[vagrant@controller ~]$ ssh azureuser@[í¼ë¸”ë¦­IP]
...
azureuser@test-vm:~$
```

<br>

**ğŸ’» ì‹¤ìŠµ: ì•”í˜¸ ì¸ì¦ ë°©ì‹ì˜ í”„ë¼ì´ë¹— ê°€ìƒ ë¨¸ì‹  ìƒì„±í•˜ê¸°**

ì°¸ê³ )ì¸ì¦ í˜•ì‹ì—ì„œ ì•”í˜¸ë¥¼ ì„ íƒí•˜ê¸° ì „ì— [SSH ê³µê°œ í‚¤] - [Azureì— ì €ì¥ëœ ê¸°ì¡´ í‚¤ ì‚¬ìš©]ì„ ì„ íƒí•´ë³´ì

ë°”ë¡œ ìœ„ ì‹¤ìŠµì—ì„œ ê¸°ì¡´ í¼ë¸”ë¦­ í‚¤ ì‚¬ìš© ë°©ì‹ì„ ì´ìš©í–ˆìŒì—ë„, **ë¦¬ì†ŒìŠ¤ê°€ ë‚¨ì§€ ì•ŠëŠ” ê²ƒ**ì„ í™•ì¸í•  ìˆ˜ ìˆìŒ

**AzureëŠ” ê¸°ì¡´ í¼ë¸”ë¦­ í‚¤ë¥¼ ì‚¬ìš©í•˜ë©´ ë¦¬ì†ŒìŠ¤ê°€ ë§Œë“¤ì–´ì§€ì§€ ì•ŠìŒ**

![image-20220426075536752](https://raw.githubusercontent.com/na3150/typora-img/main/img/image-20220426075536752.png)

ì•”í˜¸ ì¸ì¦ í˜•ì‹ ì„ íƒ í›„ ë‚´ìš© ì…ë ¥

- AzureëŠ” í¼ë¸”ë¦­ í´ë¼ìš°ë“œ ì¤‘ ìœ ì¼í•˜ê²Œ íŒ¨ìŠ¤ì›Œë“œ ì¸ì¦ì„ ì§€ì›í•¨

![image-20220426075203775](https://raw.githubusercontent.com/na3150/typora-img/main/img/image-20220426075203775.png)

ê³µìš© IP ì—†ìŒ ì²´í¬

![image-20220426075355666](https://raw.githubusercontent.com/na3150/typora-img/main/img/image-20220426075355666.png)

ë‚˜ë¨¸ì§€ëŠ” default ì„¤ì •ìœ¼ë¡œ êµ¬ì„± í›„, ìœ„ ì‹¤ìŠµì—ì„œ ìƒì„±í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í†µí•´ ì—°ê²° í™•ì¸

```shell
azureuser@test-vm:~$ ssh azure@10.0.0.5
...
azure@10.0.0.5's password:
...
azure@test-vm2:~$
```

**NAT ê²Œì´íŠ¸ì›¨ì´ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ìŒì—ë„ ê¸°ë³¸ì ìœ¼ë¡œ ì¸í„°ë„·ì´ ê°€ëŠ¥**í•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŒ

- ê·¸ëŸ¬ë‚˜ ë³´ì•ˆìƒ NAT ê²Œì´íŠ¸ì›¨ì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŒ

```
azure@test-vm2:~$ curl ifconfig.me
20.41.114.245
```

<br>
**Bastion Host**

Azureì—ì„œëŠ” Bastion Hostë¥¼ ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ë¡œ ì‚¬ìš© ê°€ëŠ¥í•¨

**ê°€ìƒ ë„¤íŠ¸ì›Œí¬ë¥¼ ë§Œë“¤ ë•Œ [ë³´ì•ˆ] - [BastionHost] - [ì‚¬ìš©]ì„ ì²´í¬í•´ë‘ë©´, ë„¤íŠ¸ì›Œí¬ì— ìë™ìœ¼ë¡œ Bastion Hostê°€ ë°°í¬**ë¨

<br>

`ì‚¬ìš© ì•ˆí•¨`ì„ ì„ íƒí•œ ê²½ìš°, ë‚˜ì¤‘ì— ì¶”ê°€í•  ìˆ˜ ìˆìŒ

![image-20220426080428728](https://raw.githubusercontent.com/na3150/typora-img/main/img/image-20220426080428728.png)

Bastion Host ìƒì„± í›„, ì—°ê²°í•  VMì„ ì„ íƒí•  ìˆ˜ ìˆìŒ

![image-20220426080845421](https://raw.githubusercontent.com/na3150/typora-img/main/img/image-20220426080845421.png)

VM ì—°ê²° ì‹œ ì„¤ì •í•œ ì¸ì¦ìœ¼ë¡œ **ì›¹ì—ì„œ ë°”ë¡œ Bastion Hostë¥¼ í†µí•´ ì ‘ì†**í•  ìˆ˜ ìˆìŒ

![image-20220426081200459](https://raw.githubusercontent.com/na3150/typora-img/main/img/image-20220426081200459.png)

![image-20220426081237819](https://raw.githubusercontent.com/na3150/typora-img/main/img/image-20220426081237819.png)